# План тестирования Cvety.kz

## 1. Функциональное тестирование

### 1.1 Аутентификация и авторизация
- [ ] Вход с корректными данными
- [ ] Вход с некорректными данными
- [ ] Выход из системы
- [ ] Проверка refresh токена
- [ ] Проверка защищенных роутов
- [ ] Тестирование ролей (директор, менеджер, флорист, курьер)

### 1.2 Управление товарами
- [ ] Создание товара с минимальными данными
- [ ] Создание товара со всеми полями
- [ ] Редактирование существующего товара
- [ ] Удаление товара
- [ ] Переключение активности товара
- [ ] Поиск и фильтрация товаров
- [ ] Загрузка изображений товара

### 1.3 Управление заказами
- [ ] Создание заказа с одним товаром
- [ ] Создание заказа с несколькими товарами
- [ ] Изменение количества товаров
- [ ] Выбор клиента (новый/существующий)
- [ ] Установка даты и времени доставки
- [ ] Добавление заметок и поздравлений
- [ ] Изменение статуса заказа
- [ ] Отмена заказа

### 1.4 База клиентов
- [ ] Просмотр списка клиентов
- [ ] Поиск клиентов по имени/телефону
- [ ] Просмотр истории заказов клиента
- [ ] Создание нового клиента
- [ ] Редактирование данных клиента
- [ ] Добавление заметок о клиенте

### 1.5 Складской учет
- [ ] Просмотр остатков на складе
- [ ] Добавление поставки
- [ ] Списание товаров
- [ ] Инвентаризация
- [ ] Установка минимальных остатков
- [ ] Уведомления о низких остатках

## 2. API тестирование

### 2.1 Эндпоинты без авторизации
```bash
# Health check
curl http://localhost:8014/health

# API информация
curl http://localhost:8014/
```

### 2.2 Эндпоинты с авторизацией
```bash
# Получение токена
curl -X POST http://localhost:8014/api/v1/auth/login \
  -H "Content-Type: application/json" \
  -d '{"phone":"+77015211545","password":"password"}'

# Использование токена
curl http://localhost:8014/api/v1/products \
  -H "Authorization: Bearer <token>"
```

### 2.3 CRUD операции
- [ ] Products: GET, POST, PUT, DELETE
- [ ] Orders: GET, POST, PUT, PATCH
- [ ] Clients: GET, POST, PUT
- [ ] Warehouse: GET, POST, PUT
- [ ] Profile: GET, PUT
- [ ] Team: GET, POST, DELETE

## 3. Интеграционное тестирование

### 3.1 Сценарий: Полный цикл заказа
1. Авторизация менеджера
2. Проверка остатков на складе
3. Создание нового заказа
4. Выбор товаров из каталога
5. Добавление/выбор клиента
6. Установка параметров доставки
7. Подтверждение заказа
8. Резервирование товаров на складе
9. Изменение статуса заказа
10. Списание товаров при доставке

### 3.2 Сценарий: Управление товаром
1. Создание нового товара
2. Добавление рецепта (состав)
3. Проверка доступности по складу
4. Активация/деактивация товара
5. Редактирование цены и характеристик
6. Удаление товара

## 4. Нагрузочное тестирование

### 4.1 Метрики производительности
- [ ] Время загрузки главной страницы < 2 сек
- [ ] Время создания заказа < 3 сек
- [ ] Поиск по базе клиентов < 1 сек
- [ ] Обновление остатков склада < 1 сек

### 4.2 Стресс-тесты
- [ ] 100 одновременных пользователей
- [ ] 1000 товаров в каталоге
- [ ] 10000 клиентов в базе
- [ ] 5000 заказов в месяц

## 5. Тестирование безопасности

### 5.1 Аутентификация
- [ ] Защита от брутфорса
- [ ] Валидация токенов
- [ ] Истечение сессий
- [ ] CORS политики

### 5.2 Данные
- [ ] SQL инъекции
- [ ] XSS атаки
- [ ] CSRF защита
- [ ] Шифрование паролей

## 6. UI/UX тестирование

### 6.1 Адаптивность
- [ ] Мобильная версия (320px)
- [ ] Планшет (768px)
- [ ] Desktop (1920px)

### 6.2 Кроссбраузерность
- [ ] Chrome
- [ ] Firefox
- [ ] Safari
- [ ] Edge

### 6.3 Доступность
- [ ] ARIA атрибуты
- [ ] Навигация с клавиатуры
- [ ] Контрастность текста
- [ ] Размеры интерактивных элементов

## 7. Регрессионное тестирование

### 7.1 Критические пути
- [ ] Авторизация → Создание заказа → Оплата
- [ ] Добавление товара → Проверка на складе → Публикация
- [ ] Регистрация клиента → История заказов → Повторный заказ

### 7.2 Автоматизация
```javascript
// Пример Playwright теста
test('Создание заказа', async ({ page }) => {
  await page.goto('http://localhost:5176');
  await page.click('[data-testid="create-order"]');
  await page.selectProduct('Красные розы');
  await page.fillCustomerInfo({
    name: 'Тест Клиент',
    phone: '+77012345678'
  });
  await page.submitOrder();
  await expect(page).toHaveURL(/\/orders\/\d+/);
});
```

## 8. Документирование дефектов

### Шаблон баг-репорта
```markdown
**Заголовок:** Краткое описание проблемы
**Серьезность:** Критическая/Высокая/Средняя/Низкая
**Приоритет:** P1/P2/P3/P4
**Окружение:**
- OS: macOS 14.5
- Browser: Chrome 120
- Backend: http://localhost:8014
- Frontend: http://localhost:5176

**Шаги воспроизведения:**
1. Шаг 1
2. Шаг 2
3. ...

**Ожидаемый результат:** Что должно произойти
**Фактический результат:** Что происходит на самом деле
**Скриншоты/Логи:** Приложения
```

## 9. Метрики качества

### KPI тестирования
- Покрытие кода тестами: > 80%
- Количество критических багов: 0
- Время исправления багов P1: < 4 часа
- Автоматизация регрессии: > 60%

### Отчетность
- Ежедневные статус-репорты
- Еженедельные метрики качества
- Релизные заметки с списком исправлений

## 10. Чек-лист перед релизом

- [ ] Все критические баги исправлены
- [ ] Регрессионные тесты пройдены
- [ ] Документация обновлена
- [ ] Производительность соответствует требованиям
- [ ] Безопасность проверена
- [ ] Backup базы данных создан
- [ ] Rollback план подготовлен