# –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞: Bitrix CRM ‚Üî –ù–æ–≤—ã–π Frontend

**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞:** 2025-10-24
**Bitrix –∫–æ–º–ø–æ–Ω–µ–Ω—Ç:** `/local/components/crm/order.list.new/class.php` (1700 —Å—Ç—Ä–æ–∫)
**–ù–æ–≤—ã–π —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥:** `/frontend/src/` (–º–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)

---

## üìä –°–ü–ò–°–û–ö –ó–ê–ö–ê–ó–û–í (Orders List)

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ –Ω–æ–≤–æ–º —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ

| –§—É–Ω–∫—Ü–∏—è | Bitrix | –ù–æ–≤—ã–π Frontend | –§–∞–π–ª |
|---------|--------|----------------|------|
| –°–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π | ‚úÖ | ‚úÖ | `Orders.jsx` |
| –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏/—Ç–µ–ª–µ—Ñ–æ–Ω—É/–Ω–æ–º–µ—Ä—É | ‚úÖ | ‚úÖ | `Orders.jsx:72-76` |
| –§–∏–ª—å—Ç—Ä "–ú–æ–∏ –∑–∞–∫–∞–∑—ã" | ‚úÖ | ‚úÖ | `Orders.jsx:14,33` |
| –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞ | ‚úÖ | ‚úÖ | `Orders.jsx:50-69` |
| –ö–ª–∏–∫ –Ω–∞ –∑–∞–∫–∞–∑ ‚Üí –¥–µ—Ç–∞–ª–∏ | ‚úÖ | ‚úÖ | `Orders.jsx:197` |
| –ü–æ–¥—Å—á–µ—Ç –ø–æ–∑–∏—Ü–∏–π –≤ –∑–∞–∫–∞–∑–µ | ‚úÖ | ‚úÖ | `Orders.jsx:230` |
| –ü—Ä–µ–≤—å—é —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∑–∞–∫–∞–∑–µ | ‚úÖ | ‚úÖ | `Orders.jsx:236-245` |

### ‚ùå –ù–ï —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (–Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å)

| –§—É–Ω–∫—Ü–∏—è | Bitrix –º–µ—Ç–æ–¥ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|--------------|-----------|----------|
| **–§–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É** | `getOrdersAction` filter.statusId | üî¥ –í–´–°–û–ö–ò–ô | –§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å: –ù–æ–≤—ã–µ, –û–ø–ª–∞—á–µ–Ω, –°–æ–±—Ä–∞–Ω, –í –¥–æ—Å—Ç–∞–≤–∫–µ –∏ —Ç.–¥. |
| **–§–∏–ª—å—Ç—Ä –ø–æ –¥–∞—Ç–µ –¥–æ—Å—Ç–∞–≤–∫–∏** | `getOrdersAction` filter.deliveryDate | üî¥ –í–´–°–û–ö–ò–ô | –î–∏–∞–ø–∞–∑–æ–Ω –¥–∞—Ç (–æ—Ç-–¥–æ) –¥–ª—è –¥–æ—Å—Ç–∞–≤–∫–∏ |
| **–§–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É –∑–∞–∫–∞–∑–∞** | `getOrdersAction` filter.orderType | üü° –°–†–ï–î–ù–ò–ô | opt, pickup, packs, noPickup |
| **–§–∏–ª—å—Ç—Ä –ø–æ –≥–æ—Ä–æ–¥—É** | `getOrdersAction` filter.deliveryId | üü° –°–†–ï–î–ù–ò–ô | –ê–ª–º–∞—Ç—ã, –ê—Å—Ç–∞–Ω–∞ –∏ —Ç.–¥. |
| **–ê—Ä—Ö–∏–≤–Ω—ã–µ –∑–∞–∫–∞–∑—ã** | `getOrdersAction` filter.statusId='ARCHIVE' | üü° –°–†–ï–î–ù–ò–ô | –û—Ç–¥–µ–ª—å–Ω–∞—è –≤–∫–ª–∞–¥–∫–∞ –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –∑–∞–∫–∞–∑–æ–≤ |
| **–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–µ** | `getOrdersAction` sort='asc'/'desc' | üü¢ –ù–ò–ó–ö–ò–ô | –ü–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é/—É–±—ã–≤–∞–Ω–∏—é –¥–∞—Ç—ã –¥–æ—Å—Ç–∞–≤–∫–∏ |
| **–ö–∞–ª–µ–Ω–¥–∞—Ä—å –≤—ã–±–æ—Ä–∞ –¥–∞—Ç—ã** | UI —ç–ª–µ–º–µ–Ω—Ç | üü° –°–†–ï–î–ù–ò–ô | –ò–∫–æ–Ω–∫–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä—è –µ—Å—Ç—å (Orders.jsx:109), –Ω–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω |
| **–û–±—â–µ–µ –∫–æ–ª-–≤–æ –∑–∞–∫–∞–∑–æ–≤ –ø–æ —Å—Ç–∞—Ç—É—Å—É** | `getTotalOrdersAction` | üü¢ –ù–ò–ó–ö–ò–ô | –ü–æ–∫–∞–∑–∞—Ç—å badges —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º (–ù–æ–≤—ã–µ: 5, –û–ø–ª–∞—á–µ–Ω–æ: 12) |

---

## üìù –î–ï–¢–ê–õ–ò –ó–ê–ö–ê–ó–ê (Order Detail)

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ –Ω–æ–≤–æ–º —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ

| –§—É–Ω–∫—Ü–∏—è | Bitrix | –ù–æ–≤—ã–π Frontend | –§–∞–π–ª |
|---------|--------|----------------|------|
| –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–µ—Ç–∞–ª–µ–π –∑–∞–∫–∞–∑–∞ | ‚úÖ | ‚úÖ | `OrderDetail.jsx` |
| –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π | ‚úÖ | ‚úÖ | `OrderDetail.jsx:100-117` |
| –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ | ‚úÖ | ‚úÖ | `OrderDetail.jsx:70-98` |
| –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–¥—Ä–µ—Å–∞/–¥–∞—Ç—ã/–∑–∞–º–µ—Ç–æ–∫ | ‚úÖ | ‚úÖ | `OrderDetail.jsx:324-445` |
| –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ | ‚úÖ | ‚úÖ | `OrderDetail.jsx:172-212` |
| –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∫—É—Ä—å–µ—Ä–∞ | ‚úÖ | ‚úÖ | `OrderDetail.jsx:214-255` |
| –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ –¥–æ –¥–æ—Å—Ç–∞–≤–∫–∏ | ‚úÖ | ‚úÖ | `OrderDetail.jsx:448-492` |
| –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–æ—Ç–æ | ‚úÖ | ‚úÖ | `OrderDetail.jsx:494-516` |
| –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞ | ‚úÖ | ‚úÖ | `OrderDetail.jsx:573-589` |
| Kaspi –≤–æ–∑–≤—Ä–∞—Ç —Å—Ä–µ–¥—Å—Ç–≤ | ‚úÖ | ‚úÖ | `OrderDetail.jsx:592-649` |
| –û—Ç–º–µ–Ω–∞ –∑–∞–∫–∞–∑–∞ | ‚úÖ | ‚úÖ | `OrderDetail.jsx:316-322` |
| –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—É—á–∞—Ç–µ–ª—è | ‚úÖ | ‚úÖ | `OrderDetail.jsx:884-894` |
| –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑—á–∏–∫–∞ | ‚úÖ | ‚úÖ | `OrderDetail.jsx:896-905` |
| WhatsApp –∏–∫–æ–Ω–∫–∏ –¥–ª—è —Å–≤—è–∑–∏ | ‚úÖ | ‚úÖ | `OrderDetail.jsx:889-891` |

### ‚ùå –ù–ï —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (–Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å)

| –§—É–Ω–∫—Ü–∏—è | Bitrix –º–µ—Ç–æ–¥ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|--------------|-----------|----------|
| **–ó–∞–º–µ—Ç–∫–∏ –∫ –∑–∞–∫–∞–∑—É** | `addNoteAction`, `removeNoteAction` | üî¥ –í–´–°–û–ö–ò–ô | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–º–µ—Ç–æ–∫ —Ñ–ª–æ—Ä–∏—Å—Ç–∞ (—Å–µ–π—á–∞—Å —Ç–æ–ª—å–∫–æ –≤ notes) |
| **–ü—Ä–æ–±–ª–µ–º–Ω—ã–π –∑–∞–∫–∞–∑** | `problemOrderAction(id, reason)` | üî¥ –í–´–°–û–ö–ò–ô | –ü–æ–º–µ—Ç–∏—Ç—å –∑–∞–∫–∞–∑ –∫–∞–∫ –ø—Ä–æ–±–ª–µ–º–Ω—ã–π —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –ø—Ä–∏—á–∏–Ω—ã |
| **–î–æ–ø–ª–∞—Ç–∞ –∑–∞ –∑–∞–∫–∞–∑** | `surchargePayOrderAction(id, phone, value, message, namePayment)` | üü° –°–†–ï–î–ù–ò–ô | –ó–∞–ø—Ä–æ—Å–∏—Ç—å –¥–æ–ø–ª–∞—Ç—É —á–µ—Ä–µ–∑ Kaspi Pay |
| **–ß–∞—Å—Ç–∏—á–Ω—ã–π –≤–æ–∑–≤—Ä–∞—Ç** | `returnPayOrderAction(id, text, false, amount)` | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ | –í Kaspi refund –µ—Å—Ç—å (OrderDetail.jsx:618-628) |
| **–ê—É–∫—Ü–∏–æ–Ω (–±–µ–∑ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ)** | `getDetailOrderAction` isAuction | üü° –°–†–ï–î–ù–ò–ô | –ï—Å–ª–∏ –Ω–µ—Ç responsibleId ‚Üí –ø–æ–∫–∞–∑–∞—Ç—å badge "–ê—É–∫—Ü–∏–æ–Ω" |
| **SMS "–£–∑–Ω–∞—Ç—å –∞–¥—Ä–µ—Å —É –ø–æ–ª—É—á–∞—Ç–µ–ª—è"** | `sendSmsClarifyAddressAction(orderId)` | üü¢ –ù–ò–ó–ö–ò–ô | –ï—Å–ª–∏ askAddress=true –∏ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ ‚Üí –ø–æ–∫–∞–∑–∞—Ç—å –∫–Ω–æ–ø–∫—É |
| **–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫—É—Ä—å–µ—Ä—É –≤ Telegram** | `sendOrderCourierTeleramAction(orderId)` | üü¢ –ù–ò–ó–ö–ò–ô | –£–≤–µ–¥–æ–º–∏—Ç—å –∫—É—Ä—å–µ—Ä–∞ –æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–∏ |
| **Yandex/Indrive –¥–æ—Å—Ç–∞–≤–∫–∞** | `createYandexOrderAction`, `cancelYandexOrderAction` | üü¢ –ù–ò–ó–ö–ò–ô | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Yandex Delivery (–±—ã–ª–æ –≤ Bitrix) |
| **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫—É—Ä—å–µ—Ä–µ (—Ç—Ä–µ–∫–∏–Ω–≥)** | `getDetailOrderAction` yandexDelivery.courier | üü¢ –ù–ò–ó–ö–ò–ô | –ü–æ–∫–∞–∑–∞—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∫—É—Ä—å–µ—Ä–∞ –Ω–∞ –∫–∞—Ä—Ç–µ |
| **–î–∞–Ω–Ω—ã–µ partner (–µ—Å–ª–∏ –∑–∞–∫–∞–∑ –æ—Ç –ø–∞—Ä—Ç–Ω–µ—Ä–∞)** | `getDetailOrderAction` partnerName | üü¢ –ù–ò–ó–ö–ò–ô | –ü–æ–∫–∞–∑–∞—Ç—å –∏–º—è –ø–∞—Ä—Ç–Ω–µ—Ä–∞ –µ—Å–ª–∏ responsibleId - –ø–∞—Ä—Ç–Ω–µ—Ä |
| **Write-off products (—Å–ø–∏—Å–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã)** | `getDetailOrderAction` writeOffProducts | üü° –°–†–ï–î–ù–ò–ô | –°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ —Å–ø–∏—Å–∞–Ω–Ω—ã—Ö —Å–æ —Å–∫–ª–∞–¥–∞ –¥–ª—è —ç—Ç–æ–≥–æ –∑–∞–∫–∞–∑–∞ |
| **–†–∞–∑—Ä–µ—à–µ–Ω–∏—è –Ω–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä –¥–∞–Ω–Ω—ã—Ö** | `canViewOrderCustomersInfo` | üü¢ –ù–ò–ó–ö–ò–ô | –°–∫—Ä—ã—Ç—å —Ç–µ–ª–µ—Ñ–æ–Ω—ã –ø–æ–ª—É—á–∞—Ç–µ–ª—è –µ—Å–ª–∏ –Ω–µ—Ç –ø—Ä–∞–≤ |
| **–ö–ª–∏–µ–Ω—Ç-—Ä–µ–π—Ç–∏–Ω–≥ –±—É–∫–µ—Ç–∞ (feedback)** | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ | –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ª–∞–π–∫–∞/–¥–∏–∑–ª–∞–π–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞ (OrderDetail.jsx:769-787) |

---

## ‚ûï –°–û–ó–î–ê–ù–ò–ï/–†–ï–î–ê–ö–¢–ò–†–û–í–ê–ù–ò–ï –ó–ê–ö–ê–ó–ê

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ –Ω–æ–≤–æ–º —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ

| –§—É–Ω–∫—Ü–∏—è | Bitrix | –ù–æ–≤—ã–π Frontend | –§–∞–π–ª |
|---------|--------|----------------|------|
| –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞ | ‚úÖ | ‚úÖ | `CreateOrder.jsx` / `CreateOrderCustomer.jsx` |
| –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–∞ | ‚úÖ | ‚úÖ | `OrderDetail.jsx:324-445` |

### ‚ùå –ù–ï —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (–Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å)

| –§—É–Ω–∫—Ü–∏—è | Bitrix –º–µ—Ç–æ–¥ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|--------------|-----------|----------|
| **–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ (–ø–æ–ª–Ω–∞—è —Ñ–æ—Ä–º–∞)** | `createOrderAction` | üî¥ –í–´–°–û–ö–ò–ô | –ü–æ–ª–Ω–∞—è —Ñ–æ—Ä–º–∞ —Å–æ –≤—Å–µ–º–∏ –ø–æ–ª—è–º–∏ –∏–∑ Bitrix |
| **–ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏** | `searchProductsAction(phrase, cityId)` | üî¥ –í–´–°–û–ö–ò–ô | –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–∏ –≤–≤–æ–¥–µ –Ω–∞–∑–≤–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ |
| **–ü–æ–¥–∞—Ä–∫–∏ (gifts)** | `createOrderAction` gifts | üü° –°–†–ï–î–ù–ò–ô | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–∞—Ä–æ—á–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ |
| **–û—Ç–∫—Ä—ã—Ç–∫–∞ (postCard)** | `createOrderAction` postCard | üü° –°–†–ï–î–ù–ò–ô | –¢–µ–∫—Å—Ç –æ—Ç–∫—Ä—ã—Ç–∫–∏ –∫ –∑–∞–∫–∞–∑—É |
| **–ê–Ω–æ–Ω–∏–º–Ω—ã–π –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å** | `editOrderNewAction` anonimSender | üü° –°–†–ï–î–ù–ò–ô | –§–ª–∞–≥ "–ù–µ –Ω–∞–∑—ã–≤–∞—Ç—å –∏–º—è –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è" |
| **–ù–µ –∑–≤–æ–Ω–∏—Ç—å –ø–æ–ª—É—á–∞—Ç–µ–ª—é (isSurprise)** | `createOrderAction` dontCallReciever | üü° –°–†–ï–î–ù–ò–ô | –§–ª–∞–≥ —Å—é—Ä–ø—Ä–∏–∑–∞ |
| **–í—ã–±–æ—Ä —Å–∏—Å—Ç–µ–º—ã –æ–ø–ª–∞—Ç—ã** | `createOrderAction` paySystemId | üü° –°–†–ï–î–ù–ò–ô | Kaspi / –ù–∞–ª–∏—á–Ω—ã–µ / –ö–∞—Ä—Ç–∞ –∏ —Ç.–¥. |
| **–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –∞–¥—Ä–µ—Å–∞** | `editOrderNewAction` street, apartment, entrance, floor | üü¢ –ù–ò–ó–ö–ò–ô | –†–∞–∑–¥–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –≤–º–µ—Å—Ç–æ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ |

---

## üì¶ –°–ü–ï–¶–ò–ê–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò

### ‚ùå –ï—â–µ –ù–ï —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

| –§—É–Ω–∫—Ü–∏—è | Bitrix –º–µ—Ç–æ–¥ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|--------------|-----------|----------|
| **–ü—Ä–∏–Ω—è—Ç—å –∑–∞–∫–∞–∑ (acceptOrder)** | `acceptOrderAction(orderId)` | üü° –°–†–ï–î–ù–ò–ô | –ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å –Ω–∞ "–ü—Ä–∏–Ω—è—Ç" + –¥–æ–ø. –ª–æ–≥–∏–∫–∞ |
| **–ó–∞–≤–µ—Ä—à–∏—Ç—å –∑–∞–∫–∞–∑** | `finishOrderAction(orderId)` | üü° –°–†–ï–î–ù–ò–ô | –°—Ç–∞—Ç—É—Å "–î–æ—Å—Ç–∞–≤–ª–µ–Ω" + –¥–æ–ø. –¥–µ–π—Å—Ç–≤–∏—è |
| **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å "–û–ø–ª–∞—á–µ–Ω"** | `setPayedAction(orderId)` | üü° –°–†–ï–î–ù–ò–ô | –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å –æ–ø–ª–∞—Ç—ã |
| **–î–æ—Å—Ç–∞–≤–ª–µ–Ω** | `setDeliveredAction()` | üü° –°–†–ï–î–ù–ò–ô | Bulk action –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏ |
| **–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫—É—Ä—å–µ—Ä—É** | `sendToCourierAction(orderId, approximateDelivery)` | üü° –°–†–ï–î–ù–ò–ô | –£–∫–∞–∑–∞—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ–µ –≤—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏ |
| **–û—Ç–º–µ–Ω–∞ Yandex –¥–æ—Å—Ç–∞–≤–∫–∏** | `cancelYandexOrderAction(orderId)` | üü¢ –ù–ò–ó–ö–ò–ô | –ï—Å–ª–∏ –±—ã–ª–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Yandex |
| **–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏** | `getOrderDeliveryPriceAction(params)` | üü¢ –ù–ò–ó–ö–ò–ô | –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å—Ç–æ–∏–º–æ—Å—Ç–∏ |

---

## üéØ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –í–ù–ï–î–†–ï–ù–ò–Æ

### 1. –í–´–°–û–ö–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢ (—Å–¥–µ–ª–∞—Ç—å –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å)

#### **–§–∏–ª—å—Ç—Ä—ã –¥–ª—è —Å–ø–∏—Å–∫–∞ –∑–∞–∫–∞–∑–æ–≤** (`Orders.jsx`)

**–¶–µ–ª—å:** –ü–æ–∑–≤–æ–ª–∏—Ç—å —Ñ–ª–æ—Ä–∏—Å—Ç–∞–º –±—ã—Å—Ç—Ä–æ –Ω–∞—Ö–æ–¥–∏—Ç—å –∑–∞–∫–∞–∑—ã

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```jsx
// –î–æ–±–∞–≤–∏—Ç—å –≤ Orders.jsx
const [filters, setFilters] = useState({
  status: '', // 'new', 'paid', 'accepted', 'assembled', 'in_delivery', 'delivered', 'cancelled'
  deliveryDate: { from: '', to: '' },
  orderType: '', // 'opt', 'pickup', 'packs', 'noPickup'
  cityId: ''
});

// –û–±–Ω–æ–≤–∏—Ç—å fetchOrders
const params = {
  limit: 50,
  ...(myOrdersFilter && { assigned_to_me: true }),
  ...(filters.status && { status: filters.status }),
  ...(filters.deliveryDate.from && { delivery_from: filters.deliveryDate.from }),
  ...(filters.deliveryDate.to && { delivery_to: filters.deliveryDate.to }),
  ...(filters.orderType && { order_type: filters.orderType }),
  ...(filters.cityId && { city_id: filters.cityId })
};
```

**UI:**
- –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `OrderFiltersPanel.jsx`
- –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫–∏-—á–∏–ø—ã –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤ (–°–µ–≥–æ–¥–Ω—è, –ó–∞–≤—Ç—Ä–∞, –≠—Ç–∞ –Ω–µ–¥–µ–ª—è)
- Dropdown –¥–ª—è –≤—ã–±–æ—Ä–∞ —Å—Ç–∞—Ç—É—Å–∞
- Date range picker –¥–ª—è –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –¥–∞—Ç

---

#### **–ó–∞–º–µ—Ç–∫–∏ –∫ –∑–∞–∫–∞–∑—É** (`OrderDetail.jsx`)

**–¶–µ–ª—å:** –§–ª–æ—Ä–∏—Å—Ç—ã –æ—Å—Ç–∞–≤–ª—è—é—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –ø–æ —Ö–æ–¥—É —Ä–∞–±–æ—Ç—ã

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```jsx
// –î–æ–±–∞–≤–∏—Ç—å –≤ OrderDetail.jsx —Å–µ–∫—Ü–∏—é "–ó–∞–º–µ—Ç–∫–∏ —Ñ–ª–æ—Ä–∏—Å—Ç–∞"
const [notes, setNotes] = useState([]);
const [newNote, setNewNote] = useState('');

const handleAddNote = async () => {
  await ordersAPI.addNote(orderId, newNote);
  fetchNotes();
  setNewNote('');
};

const handleDeleteNote = async (noteId) => {
  await ordersAPI.removeNote(orderId, noteId);
  fetchNotes();
};
```

**Backend API:**
```python
# backend/api/orders/__init__.py
@router.post("/{order_id}/notes")
async def add_order_note(order_id: int, note_text: str, current_user: User = Depends(get_current_user)):
    # –°–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å—å –≤ —Ç–∞–±–ª–∏—Ü–µ OrderNotes
    pass

@router.delete("/{order_id}/notes/{note_id}")
async def remove_order_note(order_id: int, note_id: int, current_user: User = Depends(get_current_user)):
    # –£–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å
    pass
```

---

#### **–ü—Ä–æ–±–ª–µ–º–Ω—ã–π –∑–∞–∫–∞–∑** (`OrderDetail.jsx`)

**–¶–µ–ª—å:** –ü–æ–º–µ—á–∞—Ç—å –∑–∞–∫–∞–∑—ã —Å –ø—Ä–æ–±–ª–µ–º–∞–º–∏ –¥–ª—è —ç—Å–∫–∞–ª–∞—Ü–∏–∏

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```jsx
// –î–æ–±–∞–≤–∏—Ç—å –≤ OrderDetail.jsx –∫–Ω–æ–ø–∫—É "–ü—Ä–æ–±–ª–µ–º–∞"
const [isProblem, setIsProblem] = useState(false);
const [problemReason, setProblemReason] = useState('');

const handleMarkProblem = async () => {
  await ordersAPI.markProblem(orderId, problemReason);
  showSuccess('–ó–∞–∫–∞–∑ –ø–æ–º–µ—á–µ–Ω –∫–∞–∫ –ø—Ä–æ–±–ª–µ–º–Ω—ã–π');
};
```

**UI:**
- –ö—Ä–∞—Å–Ω–∞—è –∫–Ω–æ–ø–∫–∞ "‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∞" –≤ —Å–µ–∫—Ü–∏–∏ –¥–µ–π—Å—Ç–≤–∏–π
- Modal —Å textarea –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã
- Badge "–ü—Ä–æ–±–ª–µ–º–Ω—ã–π –∑–∞–∫–∞–∑" –≤ —Å–ø–∏—Å–∫–µ –∑–∞–∫–∞–∑–æ–≤

---

### 2. –°–†–ï–î–ù–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢

#### **–î–æ–ø–ª–∞—Ç–∞ –∑–∞ –∑–∞–∫–∞–∑** (`OrderDetail.jsx`)

**–¶–µ–ª—å:** –ó–∞–ø—Ä–æ—Å–∏—Ç—å –¥–æ–ø. –æ–ø–ª–∞—Ç—É —á–µ—Ä–µ–∑ Kaspi Pay (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞ –¥–æ—Å—Ç–∞–≤–∫—É –∏–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –±—É–∫–µ—Ç–∞)

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```jsx
// –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ Kaspi refund, –Ω–æ –º–µ—Ç–æ–¥ surcharge
const handleKaspiSurcharge = async () => {
  await fetch('http://localhost:8014/api/v1/kaspi/surcharge', {
    method: 'POST',
    body: JSON.stringify({
      order_id: orderId,
      phone: orderData.phone,
      amount: surchargeAmount,
      message: surchargeReason,
      payment_name: '–î–æ–ø–ª–∞—Ç–∞ –∑–∞ –∑–∞–∫–∞–∑'
    })
  });
};
```

---

#### **–ê—É–∫—Ü–∏–æ–Ω –∑–∞–∫–∞–∑–æ–≤** (`Orders.jsx`, `OrderDetail.jsx`)

**–¶–µ–ª—å:** –ü–æ–∫–∞–∑–∞—Ç—å –∑–∞–∫–∞–∑—ã –±–µ–∑ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∫–∞–∫ "–ê—É–∫—Ü–∏–æ–Ω" –¥–ª—è –∑–∞—Ö–≤–∞—Ç–∞ —Ñ–ª–æ—Ä–∏—Å—Ç–∞–º–∏

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```jsx
// –í OrderDetail.jsx
{!orderData.assigned_to_id && (
  <div className="bg-yellow-100 border border-yellow-400 rounded p-3 mb-4">
    <div className="flex items-center gap-2">
      <span className="text-xl">üî®</span>
      <div>
        <div className="font-bold">–ê—É–∫—Ü–∏–æ–Ω</div>
        <div className="text-sm">–ù–∏–∫—Ç–æ –µ—â–µ –Ω–µ –≤–∑—è–ª —ç—Ç–æ—Ç –∑–∞–∫–∞–∑</div>
      </div>
    </div>
    <button
      onClick={handleTakeOrder}
      className="mt-2 w-full bg-yellow-500 text-white rounded py-2"
    >
      –í–∑—è—Ç—å –∑–∞–∫–∞–∑ —Å–µ–±–µ
    </button>
  </div>
)}
```

---

### 3. –ù–ò–ó–ö–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢

- **Yandex/Indrive –¥–æ—Å—Ç–∞–≤–∫–∞** - –ï—Å–ª–∏ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- **–û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Telegram** - –£–∂–µ –µ—Å—Ç—å –≤ backend —á–µ—Ä–µ–∑ MCP, –º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É
- **–ü–∞—Ä—Ç–Ω–µ—Ä—ã** - –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–∏—Å—Ç–µ–º–∞ –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤
- **SMS —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** - –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ backend

---

## üìã –ò–¢–û–ì–û–í–ê–Ø –¢–ê–ë–ï–õ–¨ –û–¢–õ–ò–ß–ò–ô

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –§—É–Ω–∫—Ü–∏–π –≤ Bitrix | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ –Ω–æ–≤–æ–º | –ù–µ–¥–æ—Å—Ç–∞–µ—Ç |
|-----------|------------------|---------------------|-----------|
| **–°–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤** | 9 | 7 | 2 (—Ñ–∏–ª—å—Ç—Ä—ã, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏) |
| **–î–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞** | 22 | 13 | 9 (–∑–∞–º–µ—Ç–∫–∏, –ø—Ä–æ–±–ª–µ–º—ã, –¥–æ–ø–ª–∞—Ç—ã) |
| **–°–æ–∑–¥–∞–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** | 10 | 2 | 8 (–ø–æ–ª–Ω–∞—è —Ñ–æ—Ä–º–∞) |
| **–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏** | 8 | 0 | 8 (–ø—Ä–∏–Ω—è—Ç—å, –∑–∞–≤–µ—Ä—à–∏—Ç—å, –¥–æ—Å—Ç–∞–≤–∫–∞) |
| **–ò–¢–û–ì–û** | **49** | **22** | **27** |

**–ü—Ä–æ—Ü–µ–Ω—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:** ~45%

---

## üõ† –ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô

### –≠—Ç–∞–ø 1: –ö—Ä–∏—Ç–∏—á–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª (2-3 –¥–Ω—è)
1. ‚úÖ –§–∏–ª—å—Ç—Ä—ã –ø–æ —Å—Ç–∞—Ç—É—Å—É –≤ Orders.jsx
2. ‚úÖ –§–∏–ª—å—Ç—Ä –ø–æ –¥–∞—Ç–µ –¥–æ—Å—Ç–∞–≤–∫–∏
3. ‚úÖ –ó–∞–º–µ—Ç–∫–∏ –∫ –∑–∞–∫–∞–∑—É
4. ‚úÖ –ü–æ–º–µ—Ç–∫–∞ "–ü—Ä–æ–±–ª–µ–º–Ω—ã–π –∑–∞–∫–∞–∑"

### –≠—Ç–∞–ø 2: –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª (3-5 –¥–Ω–µ–π)
1. ‚úÖ –î–æ–ø–ª–∞—Ç–∞ –∑–∞ –∑–∞–∫–∞–∑ (Kaspi surcharge)
2. ‚úÖ –ê—É–∫—Ü–∏–æ–Ω –∑–∞–∫–∞–∑–æ–≤
3. ‚úÖ –ü–æ–ª–Ω–∞—è —Ñ–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞
4. ‚úÖ –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏

### –≠—Ç–∞–ø 3: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª (–ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)
1. ‚úÖ Yandex/Indrive –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
2. ‚úÖ SMS —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
3. ‚úÖ –ü–∞—Ä—Ç–Ω–µ—Ä—ã
4. ‚úÖ Write-off products

---

## üí° –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

–ù–æ–≤—ã–π —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ —É–∂–µ –∏–º–µ–µ—Ç **—Å–∏–ª—å–Ω—É—é –æ—Å–Ω–æ–≤—É** —Å –º–æ–¥—É–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π, Context API –∏ –æ—Å–Ω–æ–≤–Ω—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞–º–∏.

**–ì–ª–∞–≤–Ω—ã–µ –æ—Ç–ª–∏—á–∏—è –æ—Ç Bitrix:**
- ‚úÖ **–õ—É—á—à–µ:** –ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å, —Ç–µ—Å—Ç—ã, —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π UI, Kaspi Pay –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚ùå **–•—É–∂–µ:** –ù–µ—Ç —Ñ–∏–ª—å—Ç—Ä–æ–≤, –∑–∞–º–µ—Ç–æ–∫, –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤, –¥–æ–ø–ª–∞—Ç

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã –≤ —Å–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –∑–∞–º–µ—Ç–æ–∫
3. –î–æ–±–∞–≤–∏—Ç—å –ø–æ–º–µ—Ç–∫—É "–ü—Ä–æ–±–ª–µ–º–Ω—ã–π –∑–∞–∫–∞–∑"
4. –î–æ–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ Kaspi Pay

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –Ω–æ–≤—ã–π —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –±—É–¥–µ—Ç **–Ω–∞ —É—Ä–æ–≤–Ω–µ –∏–ª–∏ –ª—É—á—à–µ** —Å—Ç–∞—Ä–æ–≥–æ Bitrix CRM.
