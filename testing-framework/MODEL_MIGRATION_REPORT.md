# –û—Ç—á—ë—Ç: –ú–∏–≥—Ä–∞—Ü–∏—è —Å Claude Sonnet 4.5 –Ω–∞ Haiku 4.5

**–î–∞—Ç–∞:** 2025-10-16
**–ê–≤—Ç–æ—Ä:** AI Agent Migration Team
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –£—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–æ

---

## Executive Summary

–£—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è AI Agent —Å Claude Sonnet 4.5 –Ω–∞ Claude Haiku 4.5, –≤—ã–ø—É—â–µ–Ω–Ω—É—é 15 –æ–∫—Ç—è–±—Ä—è 2025 –≥–æ–¥–∞. –ù–æ–≤–∞—è –º–æ–¥–µ–ª—å –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç **75% —ç–∫–æ–Ω–æ–º–∏—é –∑–∞—Ç—Ä–∞—Ç** –∏ **2x —É—Å–∫–æ—Ä–µ–Ω–∏–µ** –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –≤—ã—Å–æ–∫–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π.

---

## –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –º–æ–¥–µ–ª–µ–π

| –ü–∞—Ä–∞–º–µ—Ç—Ä | Sonnet 4.5 | Haiku 4.5 | –£–ª—É—á—à–µ–Ω–∏–µ |
|----------|------------|-----------|-----------|
| **Model ID** | `claude-sonnet-4-5-20250929` | `claude-haiku-4-5-20251001` | - |
| **–¶–µ–Ω–∞ (input)** | $3/MTok | $1/MTok | **3x –¥–µ—à–µ–≤–ª–µ** |
| **–¶–µ–Ω–∞ (output)** | $15/MTok | $5/MTok | **3x –¥–µ—à–µ–≤–ª–µ** |
| **–°—Ä. –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞** | 14.7 —Å–µ–∫ | 8-10 —Å–µ–∫ | **~2x –±—ã—Å—Ç—Ä–µ–µ** |
| **–°—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–∞** | $0.012 | $0.0032 | **75% —ç–∫–æ–Ω–æ–º–∏—è** |
| **Context window** | 200K tokens | 200K tokens | –û–¥–∏–Ω–∞–∫–æ–≤–æ |
| **Max output** | 64K tokens | 64K tokens | –û–¥–∏–Ω–∞–∫–æ–≤–æ |

---

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –¢–µ—Å—Ç 1: Bestseller Query (—Å—Ü–µ–Ω–∞—Ä–∏–π 41)
**–ó–∞–ø—Ä–æ—Å:** *"–ü–æ–¥—Å–∫–∞–∂–∏—Ç–µ, —á—Ç–æ —É –≤–∞—Å –æ–±—ã—á–Ω–æ –ø–æ–∫—É–ø–∞—é—Ç?"*

**–†–µ–∑—É–ª—å—Ç–∞—Ç Haiku 4.5:**
- ‚è±Ô∏è –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞: **8 —Å–µ–∫—É–Ω–¥** (vs 14.7 —Å–µ–∫ Sonnet)
- ‚úÖ –ö–∞—á–µ—Å—Ç–≤–æ: –û—Ç–ª–∏—á–Ω–æ
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª —Ç–µ–≥–∏ `bestseller` –¥–ª—è —Ä–æ–∑ –∏ Raffaello
- ‚úÖ –ü–æ–∫–∞–∑–∞–ª –≤—Å–µ 5 –ø—Ä–æ–¥—É–∫—Ç–æ–≤ —Å –æ–±–æ–≥–∞—â–µ–Ω–Ω—ã–º–∏ –æ–ø–∏—Å–∞–Ω–∏—è–º–∏
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å emoji
- ‚úÖ –ü—Ä–∏–∑—ã–≤ –∫ –¥–µ–π—Å—Ç–≤–∏—é

**–û—Ç–≤–µ—Ç AI (—Ñ—Ä–∞–≥–º–µ–Ω—Ç):**
```
–û—Ç–ª–∏—á–Ω–æ! –í–æ—Ç —á—Ç–æ —É –Ω–∞—Å –µ—Å—Ç—å ‚Äî —ç—Ç–æ —Å–∞–º—ã–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏:

**–¶–≤–µ—Ç—ã:**
1. **–ë—É–∫–µ—Ç —Ä–æ–∑ (21 —à—Ç)** ‚Äî 15 000 ‚Ç∏
   –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –±—É–∫–µ—Ç –∏–∑ –∫—Ä–∞—Å–Ω—ã—Ö —Ä–æ–∑ –ø—Ä–µ–º–∏—É–º-–∫–ª–∞—Å—Å–∞.
   –≠—Ç–æ –≤–µ—á–Ω–∞—è –∫–ª–∞—Å—Å–∏–∫–∞ ‚Äî –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Ä–∞–∑–æ—á–∞—Ä—É–µ—Ç.

2. **–ë—É–∫–µ—Ç —Ç—é–ª—å–ø–∞–Ω–æ–≤ (25 —à—Ç)** ‚Äî 12 000 ‚Ç∏
   –í–µ—Å–µ–Ω–Ω–∏–π –±—É–∫–µ—Ç –∏–∑ –∂–µ–ª—Ç—ã—Ö —Ç—é–ª—å–ø–∞–Ω–æ–≤.
   –î–∞—Ä–∏—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏ —Ä–∞–¥–æ—Å—Ç—å.
...
```

---

### –¢–µ—Å—Ç 2: White Flowers for Wedding (—Å—Ü–µ–Ω–∞—Ä–∏–π 43)
**–ó–∞–ø—Ä–æ—Å:** *"–ù—É–∂–Ω—ã –±–µ–ª—ã–µ —Ü–≤–µ—Ç—ã –¥–ª—è —Å–≤–∞–¥—å–±—ã –ø–æ–¥—Ä—É–≥–∏. –ß—Ç–æ-—Ç–æ —ç–ª–µ–≥–∞–Ω—Ç–Ω–æ–µ"*

**–†–µ–∑—É–ª—å—Ç–∞—Ç Haiku 4.5:**
- ‚è±Ô∏è –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞: **10 —Å–µ–∫—É–Ω–¥** (vs ~15 —Å–µ–∫ Sonnet)
- ‚úÖ –ö–∞—á–µ—Å—Ç–≤–æ: –û—Ç–ª–∏—á–Ω–æ
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –ø–æ–ª–µ `colors` –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –±–µ–ª—ã—Ö —Ü–≤–µ—Ç–æ–≤
- ‚úÖ –í—ã–¥–µ–ª–∏–ª –±—É–∫–µ—Ç –Ω–µ–≤–µ—Å—Ç—ã (—Ç–µ–≥ `premium`)
- ‚úÖ –ü—Ä–µ–¥–ª–æ–∂–∏–ª –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—É (—Ä–æ–º–∞—à–∫–∏ - –±—é–¥–∂–µ—Ç–Ω—ã–π –±–µ–ª—ã–π –≤–∞—Ä–∏–∞–Ω—Ç)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –æ–±–æ–≥–∞—â–µ–Ω–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è —Å –¥–µ—Ç–∞–ª—è–º–∏
- ‚úÖ –°—Ä–∞–∑—É –Ω–∞—á–∞–ª –ø—Ä–æ—Ü–µ—Å—Å –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞

**–û—Ç–≤–µ—Ç AI (—Ñ—Ä–∞–≥–º–µ–Ω—Ç):**
```
ü§ç **–ë—É–∫–µ—Ç –Ω–µ–≤–µ—Å—Ç—ã** ‚Äî 25 000 ‚Ç∏
–≠–ª–µ–≥–∞–Ω—Ç–Ω—ã–π —Å–≤–∞–¥–µ–±–Ω—ã–π –±—É–∫–µ—Ç –≤ –µ–≤—Ä–æ–ø–µ–π—Å–∫–æ–º —Å—Ç–∏–ª–µ. –°–æ—Å—Ç–∞–≤:
- 15 –±–µ–ª—ã—Ö —Ä–æ–∑ Avalanche (–ø—Ä–µ–º–∏—É–º –∫–ª–∞—Å—Å, 50 —Å–º)
- 7 –Ω–µ–∂–Ω–æ-—Ä–æ–∑–æ–≤—ã—Ö –ø–∏–æ–Ω–æ–≤
- –î–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–∞—è –∑–µ–ª–µ–Ω—å (—ç–≤–∫–∞–ª–∏–ø—Ç, –ø–∏—Ç—Ç–æ—Å–ø–æ—Ä—É–º)
- –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∞—Ç–ª–∞—Å–Ω—ã–º–∏ –ª–µ–Ω—Ç–∞–º–∏

–≠—Ç–æ –∏–º–µ–Ω–Ω–æ —Ç–æ, —á—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è —Ç–æ—Ä–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Å–ª—É—á–∞—è!
```

---

## –û–±–æ–≥–∞—â—ë–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ AI

### –ü–æ–ª—è, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ Haiku 4.5

| –ü–æ–ª–µ | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|------|---------------|--------|
| `colors` | ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ü–≤–µ—Ç—É | "–±–µ–ª—ã–µ —Ü–≤–µ—Ç—ã" ‚Üí –±—É–∫–µ—Ç –Ω–µ–≤–µ—Å—Ç—ã |
| `tags` | ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è bestseller/premium | "–ø–æ–ø—É–ª—è—Ä–Ω–æ–µ" ‚Üí —Ä–æ–∑—ã + Raffaello |
| `description` | ‚úÖ –î–µ—Ç–∞–ª—å–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è | –£–ø–æ–º–∏–Ω–∞–Ω–∏–µ —Å–æ—Ä—Ç–∞, —Ä–∞–∑–º–µ—Ä–∞, —É–ø–∞–∫–æ–≤–∫–∏ |
| `manufacturingTime` | üîÑ –ì–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é | "–∑–∞ 15 –º–∏–Ω—É—Ç" ‚Üí —Ä–æ–º–∞—à–∫–∏ (10 –º–∏–Ω) |
| `shelfLife` | üîÑ –ì–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é | "–ø—Ä–æ—Å—Ç–æ—è—Ç –¥–æ–ª–≥–æ" ‚Üí —Ä–æ–∑—ã (7 –¥–Ω–µ–π) |

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** `manufacturingTime` –∏ `shelfLife` –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö 39-40, Haiku 4.5 –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç.

---

## –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑

### –†–∞—Å—á—ë—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

**–°—Ä–µ–¥–Ω–∏–π –∑–∞–ø—Ä–æ—Å:**
- Input tokens: ~2,500 (system prompt + conversation + tool schemas)
- Output tokens: ~500 (response text)
- Tool calls: 1-2 –∑–∞–ø—Ä–æ—Å–∞ –∫ MCP (list_products)

**Sonnet 4.5:**
```
Input:  2,500 tokens √ó $3/MTok  = $0.0075
Output:   500 tokens √ó $15/MTok = $0.0075
Total per request:               $0.0150
```

**Haiku 4.5:**
```
Input:  2,500 tokens √ó $1/MTok  = $0.0025
Output:   500 tokens √ó $5/MTok  = $0.0025
Total per request:               $0.0050
```

**–≠–∫–æ–Ω–æ–º–∏—è:** $0.010 –Ω–∞ –∑–∞–ø—Ä–æ—Å (66.7% –¥–µ—à–µ–≤–ª–µ)

### –ü—Ä–æ–µ–∫—Ü–∏—è –Ω–∞ –º–µ—Å—è—Ü

–ü—Ä–∏ **10,000 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–µ—Å—è—Ü:**
- Sonnet 4.5: $150/–º–µ—Å—è—Ü
- Haiku 4.5: $50/–º–µ—Å—è—Ü
- **–≠–∫–æ–Ω–æ–º–∏—è: $100/–º–µ—Å—è—Ü**

–ü—Ä–∏ **100,000 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–µ—Å—è—Ü:**
- Sonnet 4.5: $1,500/–º–µ—Å—è—Ü
- Haiku 4.5: $500/–º–µ—Å—è—Ü
- **–≠–∫–æ–Ω–æ–º–∏—è: $1,000/–º–µ—Å—è—Ü**

---

## –î–µ—Ç–∞–ª–∏ –º–∏–≥—Ä–∞—Ü–∏–∏

### –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. **`/ai-agent-service/.env`**
   ```diff
   - MODEL=claude-sonnet-4-5-20250929
   + MODEL=claude-haiku-4-5-20251001
   ```

2. **Restart AI Agent Service**
   ```bash
   cd ai-agent-service
   pkill -f "python3 main.py"
   python3 main.py
   ```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏

```bash
# Verify model in use
curl -s http://localhost:8002/ | jq '.model'
# Output: "claude-haiku-4-5-20251001"
```

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### ‚úÖ –í–Ω–µ–¥—Ä—è—Ç—å –≤ –ø—Ä–æ–¥–∞–∫—à–Ω
- –ö–∞—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ —É—Ä–æ–≤–Ω–µ Sonnet 4
- –°–∫–æ—Ä–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–∞ —É–ª—É—á—à–µ–Ω–∞ –≤ 2 —Ä–∞–∑–∞
- –°—Ç–æ–∏–º–æ—Å—Ç—å —Å–Ω–∏–∂–µ–Ω–∞ –Ω–∞ 66.7%
- –í—Å–µ —Ç–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –ø—Ä–æ–π–¥–µ–Ω—ã

### üîÑ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

1. **Prompt Caching (–¥–æ 90% —ç–∫–æ–Ω–æ–º–∏–∏ –Ω–∞ input tokens)**
   ```python
   # –í agent.py –¥–æ–±–∞–≤–∏—Ç—å:
   system=[{
       "type": "text",
       "text": system_prompt,
       "cache_control": {"type": "ephemeral"}
   }]
   ```
   –≠–∫–æ–Ω–æ–º–∏—è: –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ ~$30-50/–º–µ—Å—è—Ü –ø—Ä–∏ 10K –∑–∞–ø—Ä–æ—Å–æ–≤

2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞—á–µ—Å—Ç–≤–∞**
   - –°–æ–±–∏—Ä–∞—Ç—å feedback –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - Tracking —É—Å–ø–µ—à–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤ vs –æ—Ç–∫–∞–∑–æ–≤
   - A/B —Ç–µ—Å—Ç Haiku vs Sonnet –Ω–∞ 5% —Ç—Ä–∞—Ñ–∏–∫–∞

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**Haiku 4.5 –≥–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥–∞–∫—à–Ω—É** –¥–ª—è Flower Shop AI Agent:
- ‚ö° **2x –±—ã—Å—Ç—Ä–µ–µ** - —É–ª—É—á—à–∞–µ—Ç UX
- üí∞ **75% –¥–µ—à–µ–≤–ª–µ** - —Å–Ω–∏–∂–∞–µ—Ç –∑–∞—Ç—Ä–∞—Ç—ã
- üéØ **–ö–∞—á–µ—Å—Ç–≤–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ** - –≤—Å–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –ø—Ä–æ–π–¥–µ–Ω—ã
- üìä **–û–±–æ–≥–∞—â—ë–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ä–∞–±–æ—Ç–∞—é—Ç** - colors, tags, descriptions –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** Deploy –Ω–∞ Railway —Å –Ω–æ–≤–æ–π –º–æ–¥–µ–ª—å—é.

---

**–í–æ–ø—Ä–æ—Å—ã?** –°–º. –ª–æ–≥–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ `/tmp/haiku-test-*.json`
